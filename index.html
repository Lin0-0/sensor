<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Meta, title, CSS, favicons, etc. -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">

  <link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">
  <link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-theme.min.css" rel="stylesheet">
  <link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css" rel="stylesheet">

</head>

<body>
  <!-- Static navbar -->
  <nav class="navbar">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">HTML5 Sensing Demonstration</span>
    </div>
   
  </nav>

    <div class="row">
      <div id="divOrientation" class="col-md-4">
        <h4>Orientation</h4>
        <ul>
          <li>Tilt Left/Right: <span id="spanTiltGamma">#</span>
          <li>Tilt Front/Back: <span id="spanTiltBeta">#</span>
          <li>Direction: <span id="spanTiltDir">#</span>
        </ul>
      </div>
     
    </div>
   

  <script src="http://code.jquery.com/jquery.js"></script>
  <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
  <script>
    /** 
     * This is a showcase page demonstrating the various information a webpage
     *  can glean from the device accessing it.
     * 
     * Need check for feature support and permission for each feature.
     * It would be easier to use something like Modernizr for vendor checking,
     *  but this is a demo, so checking functions are visible.
     *
     * Drawn from:
     * http://www.html5rocks.com/en/tutorials/getusermedia/intro/
     * https://simpl.info/getusermedia/sources/
     */
    
    // check for Device orientation support
    if (window.DeviceOrientationEvent) {
      window.addEventListener('deviceorientation', function(eventData) {
        // left -> right tilt
        document.getElementById("spanTiltGamma").innerHTML = eventData.gamma;
        
        // back -> front tilt
        document.getElementById("spanTiltBeta").innerHTML = eventData.beta;
        
        // compass direction
        document.getElementById("spanTiltDir").innerHTML = eventData.alpha;
      }, false);
    }
    else {
      message = 'Device Orientation is not supported for this Browser/OS version';
      document.getElementById('divOrientation').innerHTML = '<div class="alert alert-warning">'+message+'</div>';
    }
    
        

  </script>
  
  <section>
		Your device oriention is: 
		<p>
			gamma (left-to-right): <span class="l2r"></span>
		</p>
		<p>
			beta (front-to-back): <span class="f2b"></span>
		</p>	
		<p>
			alpha (direation): <span class="dir"></span>
		</p>
	</section>	
	<script type="text/javascript">
		var $ = function(selector) {
			return document.querySelector(selector);
		}

		// http://www.w3.org/2005/10/Process-20051014/tr.html#RecsWD

		// Check to make sure the browser supprots DeviceOrientationEvents
		if (window.DeviceOrientationEvent) {
		  // Create an event listener
		  window.addEventListener('deviceorientation', function(event) {
		      // Get the left-to-right tilt (in degrees).
		    var tiltLR = event.gamma;

		    // Get the front-to-back tilt (in degrees).
		    var titleFB = event.beta;

		      // Get the direction of the device (in degrees).
		    var direction = event.alpha;


		   	$('.l2r').innerText = tiltLR;
		   	$('.f2b').innerText = titleFB;
		   	$('.dir').innerText = direction;

		  });
		}
	</script>

</body>
</html>
